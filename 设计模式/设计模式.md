**设计模式**

**一. UML关系** 
***
**二. 设计模式的概念**  
1 来源  
模式概念来源于建筑学。处理类似重复问题的解决方案。
设计模式：软件设计和开发中普遍存在或者反复出现开发问题的解决方案。
2 目的
-可维护性
-可重用性
-可扩展性
低内聚 高耦合

3 六大原则  
（1）单一职责 Single Responsibility Principle  
-一个类只有一个引起它变化的原因  
（2）接口隔离 Interface Segregation Principle  
-客户端不应该依赖他不需要的接口  
（3）里氏替换 Liskov Subtitution  Principle  
-基类可以用子类透明替换  
（4）迪米特原则 Law of Demter   
-最少知道原则，一个对象应该对其他对象有最少的了解  
（5）开闭原则   
-类对修改封闭，对扩展开发  
（6）依赖倒置  
-模块间依赖通过抽象发生，面向接口编程  

***
**三. 23种设计模式**   
1 单例模式  
懒汉模式
```java

public class Singleton {
    private static Singleton instance;

    private Singleton() {
    }

    public static synchronized Singleton getInstance() {
        if (instance == null) {
            instance = new Singleton();
        }
        return instance;
    }
}
```
饿汉模式
```java

public class Singleton {
    private static Singleton instance =  new Singleton();

    private Singleton() {
    }

    public static synchronized Singleton getInstance() {
        return instance;
    }
}
```
双重检查锁 + volatile  
volatile 原因 new 是操作多个指令，不是原子（创建对象，初始化对象）
```java
public class Singleton {
    private volatile static Singleton instance;

    private Singleton() {
    }

    public static Singleton getInstance() {
        if (instance == null) {
            synchronized (Singleton.class){
                if (instance == null){
                    instance = new Singleton();
                }
            }
        }
        return instance;
    }
}
```
静态内部类
```java
public class Singleton {
    private static Singleton instance;

    private Singleton() {
    }

    public static Singleton getInstance() {
        return SingletonHolder.Instance;
    }

    private static class SingletonHolder() {
       private static final Singleton Instance = new Singleton();
    }
}
```
静态类在首次使用时加载，类加载的线程安全由虚拟机保证
***
**四. 设计模式经验总结**  
1 理解  
（1）对类、模块、系统的组织方式  
（2）cleanCode 的升级  
（3）理顺模块关系 达到松耦合效果  